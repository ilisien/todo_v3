<div class="task-content-wrapper">
     <div class="pagebottom">
          <div class="centered">          
               <span class="option"
                    id="date-toggle-{{task.id}}"
                    tabindex="0"
                    hx-post="/update-task-option/show-date-toggle/{{ task.id }}"
                    hx-target="this"
                    hx-swap="innerHTML"
                    hx-trigger="click"
                    hx-indicator="#indicator">{% if task.show_date %}[x] showing due date{% else %}[ ] hiding due date{% endif %}</span>
               <span class="option" 
                    id="task-toggle-{{task.id}}"
                    tabindex="0"
                    hx-post="/update-task-option/show-as-task-toggle/{{ task.id }}"
                    hx-target="this"
                    hx-swap="innerHTML"
                    hx-trigger="click"
                    hx-indicator="#indicator">{% if task.show_as_task %}[x] showing as task{% else %}[ ] showing as list item{% endif %}</span>
               
               <div class="bottom-short-editable-wrapper">
                    <span class="bottom-short-editable-label">tags:</span>
                    <p class="bottom-short-editable editable" 
                       id="tags-{{task.id}}"
                       contenteditable="true"
                       data-placeholder="untagged ..."
                       hx-post="/update-task-tags/{{ task.id }}"
                       hx-trigger="blur"
                       hx-target="this"
                       hx-swap="innerHTML"
                       hx-vals='js:{"tags": event.target.textContent.trim()}'
                       hx-indicator="#indicator"
                       hx-on::after-request="htmx.trigger('#filter-tabs', 'refresh-tabs')">{{task.get_tags_display()}}</p>
               </div>

               <div class="bottom-short-editable-wrapper">
                    <span class="bottom-short-editable-label">schedule:</span>
                    <p class="bottom-short-editable editable" 
                       id="schedule-{{task.id}}"
                       contenteditable="true"
                       data-placeholder="unscheduled ..."
                       hx-post="/update-task-schedule/{{ task.id }}"
                       hx-trigger="blur"
                       hx-target="#completed-{{task.id}}"
                       hx-swap="outerHTML"
                       hx-vals='js:{"schedule": event.target.textContent.trim()}'
                       hx-indicator="#indicator">{{task.schedule}}</p>
               </div>

               <div class="description-wrapper">
                    <p class="description editable" 
                    contenteditable="true"
                    data-placeholder="undescribed ..."
                    hx-post="/update-task-description/{{ task.id }}"
                    hx-trigger="blur"
                    hx-target="this"
                    hx-swap="innerHTML"
                    hx-vals='js:{"description": event.target.textContent.trim()}'
                    hx-indicator="#indicator">{{task.description}}</p>
               </div>
          </div>
     </div>

     <div class="align-left">
          {% include '_completed.html' %}
     
          <span class="name editable" 
               id="task-name-{{ task.id }}"
               contenteditable="true"
               data-placeholder="unnamed ..."
               hx-post="/update-task-name/{{ task.id }}"
               hx-trigger="blur"
               hx-target="this"
               hx-swap="innerHTML"
               hx-vals='js:{"name": event.target.textContent.trim()}'
               hx-indicator="#indicator">{{ task.name }}</span>
     </div>

     <div class="align-right">
          {% include '_due_wrapper.html' %}
          <span class="delete-btn"
               hx-post="delete-task/{{ task.id }}"
               hx-target="#task-item-{{ task.id }}"
               hx-swap="outerHTML"
               hx-trigger="click, keyup[ctrlKey&&key=='Delete'] from:#task-content-{{ task.id }}"
               hx-indicator="#indicator">Ã—</span>
     </div>
</div>

<!-- Hidden form to handle Enter key for creating subtasks -->
<form style="display: none;" 
      hx-post="/create-subtask/{{ task.id }}"
      hx-target="#subtasks-{{ task.id }}"
      hx-swap="beforeend"
      hx-trigger="keydown[key=='Enter'] from:previous .name"
      hx-indicator="#indicator"></form>

<!-- another form to handle displacement upwards-->
<form style="display: none;" 
      hx-post="/move-task/{{ task.id }}"
      hx-target="#task-list"
      hx-swap="innerHTML"
      hx-trigger="keyup[ctrlKey&&key=='ArrowUp'] from:previous .name"
      hx-vals='js:{"displacement": -1}'
      hx-indicator="#indicator"></form>

<!-- another form to handle displacement downwards-->
<form style="display: none;" 
      hx-post="/move-task/{{ task.id }}"
      hx-target="#task-list"
      hx-swap="innerHTML"
      hx-trigger="keyup[ctrlKey&&key=='ArrowDown'] from:previous .name"
      hx-vals='js:{"displacement": 1}'
      hx-indicator="#indicator"></form>

<!-- another form to handle climbing upwards-->
<form style="display: none;" 
      hx-post="/climb-task/{{ task.id }}"
      hx-target="#task-list"
      hx-swap="innerHTML"
      hx-trigger="keyup[ctrlKey&&key=='ArrowLeft'] from:previous .name"
      hx-vals='js:{"displacement": -1}'
      hx-indicator="#indicator"></form>

<!-- another form to handle climbing downwards-->
<form style="display: none;" 
      hx-post="/climb-task/{{ task.id }}"
      hx-target="#task-list"
      hx-swap="innerHTML"
      hx-trigger="keyup[ctrlKey&&key=='ArrowRight'] from:previous .name"
      hx-vals='js:{"displacement": 1}'
      hx-indicator="#indicator"></form>

<!-- handle refreshing complete after option change -->
<form style="display: none;" 
      hx-post="/refresh/complete/{{ task.id }}"
      hx-target="#completed-{{task.id}}"
      hx-swap="outerHTML"
      hx-trigger="click from:#task-toggle-{{task.id}}"
      hx-indicator="#indicator"></form>

<!-- handle refreshing date component after option change -->
<form style="display: none;" 
      hx-post="/refresh/date/{{ task.id }}"
      hx-target="#due-wrapper-{{task.id}}"
      hx-swap="outerHTML"
      hx-trigger="click from:#date-toggle-{{task.id}}"
      hx-indicator="#indicator"></form>

<!-- handle refreshing filter tabs after tag changes -->
<form style="display: none;" 
      id="refresh-tabs-form"
      hx-post="/refresh-tabs"
      hx-target="#filter-tabs"
      hx-swap="innerHTML"
      hx-trigger="refresh-tabs from:#filter-tabs"
      hx-indicator="#indicator"></form>